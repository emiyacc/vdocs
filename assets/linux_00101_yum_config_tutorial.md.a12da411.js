import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.eabe3503.js";const b=JSON.parse('{"title":"yumæºå¸¸ç”¨é…ç½®","description":"","frontmatter":{"title":"yumæºå¸¸ç”¨é…ç½®","createTime":"2023/12/21 23:14:27","updateTime":"2023/12/21 23:21:29","isPublished":true},"headers":[],"relativePath":"linux/00101_yum_config_tutorial.md","filePath":"linux/00101_yum_config_tutorial.md"}'),e={name:"linux/00101_yum_config_tutorial.md"},p=l(`<h2 id="å¸¸ç”¨yumæºåœ°å€" tabindex="-1">å¸¸ç”¨yumæºåœ°å€ <a class="header-anchor" href="#å¸¸ç”¨yumæºåœ°å€" aria-label="Permalink to &quot;å¸¸ç”¨yumæºåœ°å€&quot;">â€‹</a></h2><p>baseæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/Centos-Base.repo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/repo/Centos-7.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>epelæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/yum.repos.d/epel.repo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/repo/epel-7.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>docker-ceæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-y</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">yum-utils</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">device-mapper-persistent-data</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">lvm2</span></span>
<span class="line"><span style="color:#FFCB6B;">yum-config-manager</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--add-repo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>kubernetesæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOF</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#BABED8;"> /etc/yum.repos.d/kubernetes.repo</span></span>
<span class="line"><span style="color:#C3E88D;">[kubernetes]</span></span>
<span class="line"><span style="color:#C3E88D;">name=Kubernetes</span></span>
<span class="line"><span style="color:#C3E88D;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/</span></span>
<span class="line"><span style="color:#C3E88D;">enabled=1</span></span>
<span class="line"><span style="color:#C3E88D;">gpgcheck=1</span></span>
<span class="line"><span style="color:#C3E88D;">repo_gpgcheck=1</span></span>
<span class="line"><span style="color:#C3E88D;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>cephæº</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ceph.repo</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">EOF</span></span>
<span class="line"><span style="color:#C3E88D;">[ceph]</span></span>
<span class="line"><span style="color:#C3E88D;">name=ceph</span></span>
<span class="line"><span style="color:#C3E88D;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/x86_64/</span></span>
<span class="line"><span style="color:#C3E88D;">enable=1</span></span>
<span class="line"><span style="color:#C3E88D;">gpgcheck=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">[ceph-noarch]</span></span>
<span class="line"><span style="color:#C3E88D;">name=cephnoarch</span></span>
<span class="line"><span style="color:#C3E88D;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/noarch/</span></span>
<span class="line"><span style="color:#C3E88D;">enable=1</span></span>
<span class="line"><span style="color:#C3E88D;">gpgcheck=0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C3E88D;">[ceph-source]</span></span>
<span class="line"><span style="color:#C3E88D;">name=Ceph source packages</span></span>
<span class="line"><span style="color:#C3E88D;">baseurl=http://mirrors.aliyun.com/ceph/rpm-nautilus/el7/SRPMS</span></span>
<span class="line"><span style="color:#C3E88D;">enable=1</span></span>
<span class="line"><span style="color:#C3E88D;">gpgcheck=0</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº" tabindex="-1">å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº <a class="header-anchor" href="#å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº" aria-label="Permalink to &quot;å¦‚ä½•åˆ¶ä½œæœ¬åœ°yumæº&quot;">â€‹</a></h2><p>å½“ä½ éœ€è¦ç»™å†…ç½‘ç¯å¢ƒå®‰è£… rpm åŒ…ï¼Œå¹¶ä¸” CentOS-7-x86_64-*.iso ä¸­è‡ªå¸¦çš„ rpm åŒ…æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œé€šå¸¸ä¼šé…ç½®ç›¸å…³è½¯ä»¶çš„æœ¬åœ° yum æºï¼›ä¸‹æ–‡ä¸­å·²å®‰è£… <code>docker-ce-18.09</code> ä¸ºä¾‹</p><p>step01 æŸ¥çœ‹æ‰€æœ‰å¯ä»¥å®‰è£…çš„ç‰ˆæœ¬</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">list</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker-ce</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--showduplicates</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">sort</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-r</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step02 ä¸‹è½½å®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•ï¼Œå…¶ä¸­ç‰ˆæœ¬å·ä¸ºå†’å·<code>:</code>å¼€å§‹è‡³ç¬¬ä¸€ä¸ªè¿å­—ç¬¦<code>-</code>ç»“æŸ</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker-ce-18.09.9</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker-ce-cli-18.09.9</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--downloadonly</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">--downloaddir=docker-ce/packages/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step03 ç”Ÿæˆrepodataå…ƒæ•°æ®</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">createrepo</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docker-ce/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº" tabindex="-1">åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº <a class="header-anchor" href="#åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº" aria-label="Permalink to &quot;åˆ›å»ºå¸¦sslè¯ä¹¦çš„æœ¬åœ°yumæº&quot;">â€‹</a></h2><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šè¦æ±‚é…ç½®å¸¦ ssl çš„æœ¬åœ° yum æº</p><p>step01 å®‰è£… <code>httpd</code>ã€<code>mod_ssl</code>ï¼Œå½“ç„¶å®‰è£…å…¶å®ƒçš„é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¹Ÿè¡Œï¼Œä¾‹å¦‚ nginx</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yum</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">httpd</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">mod_ssl</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>step02 ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/httpd/conf.d/ssl.conf</code>ï¼ŒæŒ‡å®šæœåŠ¡ç«¯è¯ä¹¦å’Œkey</p><p>ğŸ‘‰<a href="/vdocs/linux/00201_openssl_certs_tutorial.html">å¦‚ä½•åˆ›å»ºè¯ä¹¦</a></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Listen</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">9090</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">https</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">VirtualHost _default_:</span><span style="color:#89DDFF;">9090&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">SSLCertificateFile</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/httpd/certs/192.168.10.11-server.crt</span></span>
<span class="line"><span style="color:#FFCB6B;">SSLCertificateKeyFile</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/etc/httpd/certs/192.168.10.11-server.key</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#BABED8;">/VirtualHost</span><span style="color:#89DDFF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>step03 é…ç½® <code>/etc/yum.repos.d/network.repo</code>ï¼Œç›¸å…³é…ç½®å‚è€ƒ: <code>man yum.conf</code></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">network</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">name</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">network</span></span>
<span class="line"><span style="color:#BABED8;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://192.168.10.11:9090/network</span></span>
<span class="line"><span style="color:#BABED8;">enabled</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#BABED8;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line highlighted"><span style="color:#BABED8;">sslverify</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line highlighted"><span style="color:#BABED8;">sslcacert</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">/etc/yum.repos.d/certs/ca.crt</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">docker-ce</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">name</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">docker-ce</span></span>
<span class="line"><span style="color:#BABED8;">baseurl</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://192.168.10.11:9090/docker-ce</span></span>
<span class="line"><span style="color:#BABED8;">enabled</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#BABED8;">gpgcheck</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line highlighted"><span style="color:#BABED8;">sslverify</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># sslcacert=/etc/yum.repos.d/certs/ca.crt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="é—®é¢˜" tabindex="-1">é—®é¢˜ <a class="header-anchor" href="#é—®é¢˜" aria-label="Permalink to &quot;é—®é¢˜&quot;">â€‹</a></h2><h3 id="yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·-æ— å“åº”" tabindex="-1">yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·ï¼Œæ— å“åº” <a class="header-anchor" href="#yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·-æ— å“åº”" aria-label="Permalink to &quot;yumå‘½ä»¤è¡Œè¢«æŒ‚èµ·ï¼Œæ— å“åº”&quot;">â€‹</a></h3><p>æ’æŸ¥åŸå› æ˜¯ rpm çš„æ–‡ä»¶é”æ²¡æœ‰é‡Šæ”¾ï¼Œå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶é”</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mv</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/var/lib/rpm/.rpm.lock</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">bak/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,32),o=[p];function r(c,t,i,y,u,d){return n(),a("div",null,o)}const D=s(e,[["render",r]]);export{b as __pageData,D as default};
